[TOC]



## hashMap原理

[说说 Java 中 HashMap 的原理？ - Java 集合面试题 - 面试鸭 - 程序员求职面试刷题神器](https://www.mianshiya.com/bank/1788408712975282177/question/1834107117591187457)

HashMap是基于哈希表的数据结构，用于存储键值对。将键的hash值映射到数组索引位置，通过数组+链表（jdk1.8以后是**数组+链表+红黑树**）来处理哈希冲突。

使用`hashcode()`计算hash值，通过indexFor()（jdk1.8以后使用`（n-1）& hash`）确定元素在数组中的存储位置。

默认初始容量16，负载因子0.75。当存储元素数量超过16 * 0.75 = 12 个时，触发扩容操作，容量 * 2 并重新分配元素位置。



优化当多个元素映射到同一个哈希桶时的查找性能，当链表长度>8，链表会转变为红黑树（自平衡二叉树）。树中元素<6，会转换回链表



jdk1.7之前链表插入使用头插法，发生hash冲突时，新节点总是插入到链表头部；在多线程环境下，可能形成环，特别是在并发扩容时

jdk1.8，改为尾插法，保持插入顺序



## hashSet保证消息排序

treeHashSet

## trancation 事务传播行为

[Spring 有哪几种事务传播行为? - 面试鸭 - 程序员求职面试刷题神器](https://www.mianshiya.com/question/1780933295417094146)

## 介绍项目细节

**生产流程**

用户负责对成品烟进行排产，排出生产计划，计划导入mes系统，具体到机台，这个机台今天生产多少箱烟



一个新的牌号



牌号基础信息由中烟主数据下发

用户在mes系统维护牌号的工艺信息（制丝、卷包的质量参数、工序信息下发到底层集控系统），这些信息会在数采时使用

用户下发生产指令单（牌号等信息）给底层集控系统，交互使用中间表交互，集控解析信息后返回生产工单信息（包括班次，开始结束时间，牌号，批次，工单号等），生产工单的生产状态（下发PLC，开工，完成）由集控系统通过接口返回

产量由产量确认单提供，绑定到工单，部分信息（数采产量）由底层系统提供，部分由用户填写，完工时会走审批流程手动确认



生产用到的材料通过出入库记录来绑定工单号



物料入库，入库单由WMS接口提供，可能一个单据有多个材料，收货后对应明细都会生成一条单据

收货时，生成材料检验单，提交后会生成检验工单，这里没有堵死，只是记录一个流程，这里收货后单据状态就是完全收货了

这里的物料检验由实验室完成，通过tcp、ucp、opc、串口传输到mes系统的检验工单明细



生产消耗

每个机台用了多少材料信息由WMS提供，只有总的材料量；没有记录如果这个机台有多的材料借给别的机台用了，通过用户手动录入，mes再班次结束是自动汇总计算



